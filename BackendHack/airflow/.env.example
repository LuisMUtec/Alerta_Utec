# ==============================================================================
# CONFIGURACIÓN DE AIRFLOW - ALERTA UTEC
# ==============================================================================
# Copiar este archivo como .env y configurar con los valores reales

# ------------------------------------------------------------------------------
# AWS CONFIGURATION
# ------------------------------------------------------------------------------
AWS_DEFAULT_REGION=us-east-1
AWS_ACCESS_KEY_ID=TU_ACCESS_KEY_AQUI
AWS_SECRET_ACCESS_KEY=TU_SECRET_KEY_AQUI
AWS_SESSION_TOKEN=TU_SESSION_TOKEN_AQUI

# ------------------------------------------------------------------------------
# API BACKEND
# ------------------------------------------------------------------------------
# URL base del API Gateway de Lambda
API_BASE_URL=https://zictdclmxa.execute-api.us-east-1.amazonaws.com/dev

# ------------------------------------------------------------------------------
# WEBSOCKET
# ------------------------------------------------------------------------------
# URL del WebSocket API
WEBSOCKET_URL=wss://2uydj07b34.execute-api.us-east-1.amazonaws.com/dev

# ------------------------------------------------------------------------------
# DYNAMODB
# ------------------------------------------------------------------------------
# Nombre de la tabla de incidentes
DYNAMODB_TABLE_INCIDENTES=Incidentes

# ------------------------------------------------------------------------------
# AIRFLOW DATABASE (PostgreSQL RDS)
# ------------------------------------------------------------------------------
# Connection string para la base de datos de metadatos de Airflow
AIRFLOW__DATABASE__SQL_ALCHEMY_CONN=postgresql+psycopg2://airflow:AirflowUTEC2025!@alerta-utec-airflow-db.c2hy60gowllu.us-east-1.rds.amazonaws.com:5432/airflow

# ------------------------------------------------------------------------------
# AIRFLOW CORE SETTINGS
# ------------------------------------------------------------------------------
AIRFLOW__CORE__EXECUTOR=LocalExecutor
AIRFLOW__CORE__LOAD_EXAMPLES=false
AIRFLOW__CORE__DAGS_FOLDER=/opt/airflow/dags
AIRFLOW__WEBSERVER__SECRET_KEY=alerta-utec-secret-key-2025

# ------------------------------------------------------------------------------
# EMAIL NOTIFICATIONS (Brevo SMTP)
# ------------------------------------------------------------------------------
# Configuración SMTP de Brevo (ex-Sendinblue)
# Obtén tus credenciales en: https://app.brevo.com/settings/keys/smtp
# Servidor: smtp-relay.brevo.com, Puerto: 587
SMTP_HOST=smtp-relay.brevo.com
SMTP_PORT=587
SMTP_EMAIL=tu-email@smtp-brevo.com
SMTP_PASSWORD=xsmtpsib-TU_CLAVE_SMTP_AQUI

# Emails de áreas responsables
EMAIL_SEGURIDAD=seguridad@utec.edu.pe
EMAIL_INFRAESTRUCTURA=infraestructura@utec.edu.pe
EMAIL_LIMPIEZA=servicios@utec.edu.pe
EMAIL_TECNOLOGIA=ti@utec.edu.pe
EMAIL_ACADEMICO=academico@utec.edu.pe
EMAIL_SOPORTE=soporte@utec.edu.pe

# ------------------------------------------------------------------------------
# SMS NOTIFICATIONS (AWS SNS)
# ------------------------------------------------------------------------------
# Números de contacto de emergencia (formato: +51999999999)
SMS_CONTACTO_SEGURIDAD_1=+51999999999
SMS_CONTACTO_SEGURIDAD_2=+51888888888

# ------------------------------------------------------------------------------
# S3 STORAGE
# ------------------------------------------------------------------------------
# Bucket para almacenar reportes
S3_BUCKET_REPORTES=alerta-utec-reportes
# Bucket para DAGs (si se usa sync desde S3)
S3_BUCKET_DAGS=alerta-utec-airflow-dags

# ------------------------------------------------------------------------------
# DAG SCHEDULING
# ------------------------------------------------------------------------------
# Intervalo de ejecución de DAG de clasificación (en minutos)
DAG_CLASIFICAR_INTERVAL_MINUTES=5
# Intervalo de ejecución de DAG de notificaciones (en minutos)
DAG_NOTIFICACIONES_INTERVAL_MINUTES=3
# Intervalo de ejecución de DAG de reportes (en horas)
DAG_REPORTES_INTERVAL_HOURS=6

# ------------------------------------------------------------------------------
# THRESHOLDS Y LÍMITES
# ------------------------------------------------------------------------------
# Tiempo máximo antes de considerar un incidente como "antiguo" (en minutos)
THRESHOLD_TIEMPO_CRITICO_MINUTES=30

# ------------------------------------------------------------------------------
# DASHBOARD URL
# ------------------------------------------------------------------------------
# URL del frontend (Amplify)
DASHBOARD_URL=https://alerta-utec.com/dashboard

# ------------------------------------------------------------------------------
# LOGGING
# ------------------------------------------------------------------------------
# CloudWatch Log Group
CLOUDWATCH_LOG_GROUP=/ecs/alerta-utec-airflow
